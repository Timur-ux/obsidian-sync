Для определения того, находится ли данный фрагмент в тени обычно используют так называемую карту теней([[Shadow map]]). Идея такова:
- Рендерим всю сцену только в буффер глубины, поместив камеру в источник света. Таким образом для каждого фрагмента мы получим его глубину относительно источника света.
- Сохраняем буффер глубины в отдельную текстуру, т.к. буффер глубины мы потом перезапишем, а значения нам надо где-то сохранить.
- Рендерим всю сцену как обычно, но для каждого фрагмента сравниваем его значение глубины относительно источника света со значением глубины из карты теней.
	- Если значение глубины больше, чем оное в карте теней -- значит фрагмент находится в тени и не освещается.
	- Если значение глубины меньше, чем оное в карте теней -- значит фрагмент освещается нормально.


[[Computer Graphics]]  [[Shadow]]